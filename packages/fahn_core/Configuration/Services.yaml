services:
  _defaults:
    autowire: true
    autoconfigure: true

  Vendor\FahnCore\Hooks\CacheInvalidationHook:
    public: true
    tags:
      - name: event.listener
        identifier: 'fahn-core/cache-invalidation'
        event: TYPO3\CMS\Core\Cache\Event\CacheFlushEvent
        method: 'clearCachePostProc'

  # A.7.5.1: Accessibility-Audit Command
  Vendor\FahnCore\Command\AccessibilityAuditCommand:
    tags:
      - name: console.command
        command: 'fahn-core:accessibility:audit'
        description: 'Prüft alle Bildreferenzen auf WCAG 2.2-konforme Alt-Texte'

  # Automatische TypoScript-Einbindung für Root-Templates
  Vendor\FahnCore\Hooks\TypoScriptHook:
    public: true

  # Extbase Controller müssen explizit als Services registriert werden (TYPO3 v13)
  Fahn\Core\Controller\LoginController:
    public: true
    tags:
      - name: extbase.controller
        extensionName: FahnCore
        pluginName: Login

